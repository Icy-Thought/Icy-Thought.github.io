[{"content":"Introduction Managing your NixOS system is not always a simple task. It sometimes requires you to look in directions that you have not previously thought of.\nOne of such examples is my recent encounter with the residues left floating around in both:\n/nix/var/nix/profiles/per-user/ /nix/var/nix/gcroots/per-user/ Where both of these directories had retained my pre-flake setup (1 year old) and never complained about the garbage even though I had on many occasions used:\nsudo nix-collect-garbage -d sudo nix store gc nix store optimise After venturing inside my /nix/store directory, I had found package builds tracing back to 2021-08-26, the date I used to run a non-flake based NixOS configuration. That had me surprised and after continues questionings and command pasting, I had came across the following command (output by Nix): nix store query --roots /nix/store/dapkosdkaspokdqw-old-package; a command intended to help you unravel what could be using a certain package.\nApparently, nix-store garbage collect had failed to recognize the status of my old user and therefore thought it was still being used, although there had been no mentions of it in my flake setup!\nTo counter this issue, manual intervention was required:\nsudo rm /nix/var/nix/profiles/per-user/old-user/ -rf sudo rm /nix/var/nix/gcroots/per-user/old-user/ -rf And afterwards I had ran:\nsudo nix-collect-garbage -d sudo nix store gc To later find out that 21962.08 MiB had been freed from my system!\n1 store paths deleted, 150.24 MiB freed (nix-collect-garbage) 15027 store paths deleted, 21811.84 MiB freed (nix store gc) Closing Statement Be on a look-out for old information that could still be haunting you today. You never know what the garbage collector fails to clean-up!\n","date":"2022-09-09T02:30:00Z","permalink":"https://icy-thought.github.io/p/nix-cleanup/","title":"Cleaning Up Nix Residues"},{"content":"Introduction Ever wanted to remove the pre-installed applications that came with your phone? Fortunately, there is an easy way to debloat your phone by uninstalling the unnecessary applications installed on your phone rather than disabling them (as suggested by the application manager of your phone).\nMethod Append programs.adb.enable = true; to your configuration.nix for your NixOS dotfiles. a) Or install the package through your distro\u0026rsquo;s package manager. Enable \u0026ldquo;developer settings\u0026rdquo; through your settings app and later plug-in your phone to your computer. Launch terminal -\u0026gt; adb devices (if device shown) -\u0026gt; adb shell + (from your phone) allow access to your phone. pm list packages -\u0026gt; list current installed packages. pm list users -\u0026gt; to determine where to uninstall the packages from (normal, work or secure folder) pm uninstall -k --user 0 package-name -\u0026gt; uninstall package. a) If success was returned = successfully uninstalled package. b) if unsuccessful either package does not exist or you mistyped the package name. ","date":"2022-07-28T09:24:00Z","permalink":"https://icy-thought.github.io/p/debloat-android/","title":"Debloat Android"},{"content":"Welcome to Hugo theme Stack. This is your first post. Edit or delete it, then start writing!\nFor more information about this theme, check the documentation: https://docs.stack.jimmycai.com/\nWant a site like this? Check out hugo-theme-stack-stater\nPhoto by Pawel Czerwinski on Unsplash\n","date":"2022-03-06T00:00:00Z","image":"https://icy-thought.github.io/p/hello-world/cover_hud7e36f7e20e71be184458283bdae4646_55974_120x120_fill_q75_box_smart1.jpg","permalink":"https://icy-thought.github.io/p/hello-world/","title":"Hello World"},{"content":"Add/Replace Gnome Menu Options Want to replace the =Open in Terminal= with =Open in Alacritty= (or any other terminal)?\nWhat you need: FileManager Actions through: 1 sudo pacman -S filemanager-actions Steps Install the FileManager Actions.\nLaunch the application and define a new action.\nSelect display item for both selection and location in context menu.\nAction Tab settings: a. Context label: the text of the action which will appear in the context menu.\nCommand Tab settings: a. Path: /usr/bin/alacritty (replace alacritty with your terminal of choice.) b. Parameters: --working-directory=%d/%b\nSave the newly created action!\nCongratulations! ","date":"2021-10-14T10:23:00Z","permalink":"https://icy-thought.github.io/p/gnome-menu-options/","title":"Gnome Menu Options"},{"content":"Wireguard.nix One of the many free \u0026amp; open-source VPN protocol and when fused with the wonderful declarative Nix configuration one is able to setup their system without hinders!\nIn this post I will attempt to explain how to setup a declarative wireguard.nix module, enjoy!\nNote The \u0026lt;\u0026lt;X\u0026gt;\u0026gt; provided in the source-blocks links the remaining source blocks with the source-block they are input in. This is useful when writing your Nix configurations in org-mode and later tangling (outputs the code only) the result to a example.nix file.\nSystemd.service: wg-quick-wg0. This is not a necessary step, but to prevent the service from starting during boot while remaining enabled one has to specify the ~wantedBy~ option.\nAnother reason to why I am using the following setup is to add the ~path~, listed in the ~systemd.services~, to the scope which helps me reduce the amount of references required when enabling the kill-switch later on.\n1 2 3 4 5 6 7 8 9 10 11 12 { config, pkgs, lib, ... }: { systemd.services.\u0026#34;wg-quick-wg0\u0026#34; = { requires = [ \u0026#34;network-online.target\u0026#34; ]; after = [ \u0026#34;network.target\u0026#34; \u0026#34;network-online.target\u0026#34; ]; wantedBy = lib.mkForce [ ]; environment.DEVICE = \u0026#34;wg0\u0026#34;; path = [ pkgs.wireguard-tools pkgs.iptables pkgs.iproute ]; }; \u0026lt;\u0026lt;networking\u0026gt;\u0026gt; } Note You are not limited to using ~wg0~ as an interface name. You could instead use whatever name you deem fit for your wg-quick interface!\nNetworking: Setup your wg-quick Interface Define your wg-quick interface (make sure to replace wg0 with your interface name) and obviously fill in the missing info inside the quotes:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 networking = { wg-quick.interfaces = { wg0 = { address = [ \u0026#34;\u0026#34; ]; dns = [ \u0026#34;\u0026#34; ]; listenPort = 51820; privateKeyFile = \u0026#34;wireguard_private.key\u0026#34;; peers = [{ publicKey = \u0026#34;\u0026#34;; allowedIPs = [ \u0026#34;\u0026#34; ]; endpoint = \u0026#34;\u0026#34;; persistentKeepalive = 25; }]; \u0026lt;\u0026lt;kill-switch\u0026gt;\u0026gt; }; }; }; Kill-Switch: Prevent DNS Leakage! When the connection is probable to leaking your DNS, the connection will completely shutdown and prevent any form of network flow unless the systemd-service has been restarted:\n1 2 3 4 5 6 7 postUp = \u0026#39;\u0026#39; iptables -I OUTPUT ! -o wg0 -m mark ! --mark $(wg show wg0 fwmark) -m addrtype ! --dst-type LOCAL -j REJECT \u0026amp;\u0026amp; ip6tables -I OUTPUT ! -o wg0 -m mark ! --mark $(wg show wg0 fwmark) -m addrtype ! --dst-type LOCAL -j REJECT \u0026#39;\u0026#39;; preDown = \u0026#39;\u0026#39; iptables -D OUTPUT ! -o wg0 -m mark ! --mark $(wg show wg0 fwmark) -m addrtype ! --dst-type LOCAL -j REJECT \u0026amp;\u0026amp; ip6tables -D OUTPUT ! -o wg0 -m mark ! --mark $(wg show wg0 fwmark) -m addrtype ! --dst-type LOCAL -j REJECT \u0026#39;\u0026#39;; Congratulations! You now have a fully functional wg-quick interface!\n","date":"2021-06-16T10:22:12Z","permalink":"https://icy-thought.github.io/p/nixos-wireguard/","title":"NixOS WireGuard"},{"content":"Procedure Edit /etc/systemd/resolved.conf by adding the valuable bits (dns, fallback dns) Execute the follwing commands in your terminal instance: a. systemctl restart systemd-resolved b. sudo ln -s /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf ","date":"2021-05-06T12:34:00Z","permalink":"https://icy-thought.github.io/p/systemd-resolved/","title":"Setting up systemd-resolved"},{"content":"Procedure First, convert image.jpg to image.pdf through:\n1 convert image.jpg image.pdf Second, combine image.pdf with input.pdf to produce output.pdf through:\n1 pdfunite image.pdf input.pdf output.pdf ","date":"2021-05-06T00:00:00Z","permalink":"https://icy-thought.github.io/p/pdf-cover/","title":"PDF-Cover"},{"content":"Introduction The process of installing extensions for your gnome-shell is not as simple as installing addons from your browser store. One has to first install a package by the name of GNOME Shell-integration from the browser store and also chrome-gnome-shell to enable Gnome-extension to install, remove and configure the installed Gnome extensions.\nProcedure To enable the installation of Gnome extension on the Firefox browser installed from nixpkgs we are required to add chrome-gnome-shell to our installed packages in environment.systemPackages and later inform the Firefox wrapper to enable chrome-gnome-shell for our Firefox browser:\n1 2 3 4 5 environment.systemPackages = [ chrome-gnome-shell ]; nixpkgs.config.firefox.enableGnomeExtensions = true;` This solution does not work for Firefox browsers installed through the Mozilla overlay. Therefore the user ought to link the nix-store generated org.gnome.chrome_gnome_shell.json to ~/.mozilla/native-messaging-hosts/ everytime chrome-gnome-shell it has been updated. Not an ideal solution if not automated and one of the several methods used to automate such process is done through appending the following lines to your home.nix to allow Home-Manager to automate the process for you:\n1 2 home.file.\u0026#34;.mozilla/native-messaging-hosts/org.gnome.chrome_gnome_shell.json\u0026#34;.source = \u0026#34;${pkgs.chrome-gnome-shell}/lib/mozilla/native-messaging-hosts/org.gnome.chrome_gnome_shell.json\u0026#34;; }; Congratulations You now have a functional solution which enables you to manage your Gnome-shell extensions! If you have a better solution, please do tell me by either submitting an issue or a PR informing me about it!\n","date":"2021-04-22T00:00:00Z","permalink":"https://icy-thought.github.io/p/chrome-gnome-shell/","title":"Enable 'chrome-gnome-shell' in Firefox Nightly"},{"content":"Cause? Weird Power-saving mode enabled by default, which causes Fn-key to not disable light after being disabled + random network disconnection + bluetooth not enabling after being disabled although rfkill list shows no presence of soft kill.\nTemporary Solution: 1 su -c \u0026#39;ip link set wlp3s0 down \u0026amp;\u0026amp; modprobe -r rtw88_8822be \u0026amp;\u0026amp; modprobe rtw88_8822be \u0026amp;\u0026amp; ip link set wlp3s0 up\u0026#39; Permantent Solution - Dante777 Append one of the following in the kernel parameters of your bootloader of choice:\nPower-saving Mode 1 pcie_aspm.policy=powersave Performance Mode 1 pcie_aspm.policy=performance ","date":"2021-04-16T23:11:12Z","permalink":"https://icy-thought.github.io/p/network-issue-1/","title":"Network Issue 1"},{"content":"Getting Started Are you a Chinese speaking person? A person planning on learning Chinese digitally? Did you download Fcitx and set it up to the point that you started the download for the package fcitx-sogoupinyin but ended up in an endless loop where you started wondering whether there was an endless reoccurring loop of errors but didn\u0026rsquo;t believe your gut feelings?\nWell, I am here to confirm what you are feeling and of course, this is not the ultimate solution to the problem because what you might be facing could be something totally different than the problem I had which was an endless loop of building Qtwebkit, which is a package that is needed for fcitx-sogoupinyin to be installed.\nThe solution to the problem is very simple and goes like this:\nCancel the current running installation for fcitx-sogoupinyin by clicking on CTRL + C. Install Qtwebkit-bin package from AUR. Reinstall fcitx-sogoupinyin. That should solve the problem for you! Hope you enjoy your time learning/using the package :)\n","date":"2021-04-12T00:00:00Z","permalink":"https://icy-thought.github.io/p/sogoupinyin-loop/","title":"Fcitx Sogoupinyin Endless Loop"},{"content":"LeagueClient.exe could not be found! This tutorial is written for Arch Linux users and should be followed with caution!\nGetting Started Using Arch Linux as your first distro can be painful sometimes, especially when you don\u0026rsquo;t know your way around the system. You can get lost, depressed and even want to through your PC/Laptop from the 8 floor to make sure it doesn\u0026rsquo;t survive. Although you can reach this certain point, you sure wouldn\u0026rsquo;t commit suicide after having a Windows 10 update running for 1 day making all your work delayed!\nI wrote this guide to ease the painful process of fixing an error you don\u0026rsquo;t even know the reason behind it\u0026rsquo;s existence with the help of u/msquirrel who helped me find the solution to the problem I was facing during the installation of League of Legends using the script available on Lutris website.\nThe errors that made the installation crash are the following:\nError running C:\\Riot Games\\League of Legends/Prerequisites/Dx9/dxsetup.exe /silent: child killed: unknown signal This error later resulted in the error mentioned in the title of this post. And after checking the logs while conduction a series of reinstallation of League of Legends on Lutris we found out there are missing packages that was supposed to be installed before installing the game using Lutris.\nThose packages are:\ngnutls lib32-gnutls lib32-alsa-lib lib32-libldap lib32-lcms2 samba krb5 lib32-krb5 lib32-openal Copy-Paste in terminal to install the packages:\n1 2 3 4 5 6 7 sudo pacman -S gnutls lib32-gnutls lib32-alsa-lib lib32-libldap lib32-lcms2 samba krb5 lib32-krb5 lib32-openal # After Installing The Required Packages - Reinstall League of Legends from Lutris. # Enjoy Playing League! ","date":"2021-04-02T12:31:00Z","permalink":"https://icy-thought.github.io/p/lol-client-error/","title":"League-Client Not Found"},{"content":"Issue When encountering this issue the computer will start using the CPU to it\u0026rsquo;s maximum potential which will make the fans noisy and therefore the computer usage experience terrible.\nSolution To fix this issue you could either run balooctl disable and later remove the indexing file, created by baloo_file_index, or you could edit ~/.config/baloofilerc and append the following lines to the end of the configuration file:\n1 2 [General] only basic indexing=true Most KDE users have a pre-existing [General] section and therefore appending only basic indexing=true to the end of that section is enough.\nHappy Linuxing!\n","date":"2021-04-02T00:00:00Z","permalink":"https://icy-thought.github.io/p/baloo-cpu-issue/","title":"Baloo File 100% CPU Usage"},{"content":"First and Foremost\u0026hellip; I am not responsible over whatever shit that might occur during your migration process. What I am doing in this guide is documenting the process of the migration for my two previous partitions into one unified partition for the sake of seeking this guide when required.\nGetting Started /Have you ever gotten into a situation where you have to clean your /root partitions cache constantly because it keeps getting full? And by any chance, did you create a separate /home and /root partition which you now regret doing? If so then this guide is for you!/\nNote Before proceeding with anything you need to know this: do not remove more than the /home partition after backing it up in another partition and it\u0026rsquo;s also advised that you back up both the partitions in another partition than /root!\nWARNING Before we start off with the guide I need to clarify this that you should apply the commands based on your partition scheme and that this guide is written based on my partition scheme! So please, be cautious and follow this guide with the help of an experienced person if you do not understand what you should do!**\nCurrent Partition Scheme 1 2 3 4 5 6 7 8 9 10 11 12 13 [arch@archlinux ~]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 87.9M 1 loop /var/lib/snapd/snap/core/5548 sda 8:0 0 465.8G 0 disk ├─sda1 8:1 0 300M 0 part ├─sda2 8:2 0 100M 0 part ├─sda3 8:3 0 128M 0 part ├─sda4 8:4 0 232.7G 0 part ├─sda5 8:5 0 550M 0 part /boot ├─sda6 8:6 0 12G 0 part [SWAP] ├─sda7 8:7 0 20G 0 part / └─sda8 8:8 0 200G 0 part /home sr0 11:0 1 1024M 0 rom The surgery IMPORTANT Make sure to remove cached files which you won\u0026rsquo;t be needing for this procedure to reduce the amount of time required to backup your files!\nBackup /home: will later be used to restore all the files after home partition (/dev/sdaX) has been removed and turned into anllocated space.\nsudo tar czpvf /PATH/TO/BACKUP_PARTITION/home.tar.gz -C /home . Backup /root: if something wrong happens throughout the process, this backup would be used to ensure that the process is still replicatable.\nReboot into a LiveUSB to prevent file loss during the backup process. Before Backup If you want to backup your files in your dual-boot OS (Windows): you need to install ntfs-3g which will allow you to mount the Windows partition without problems.\npacman -S ntfs-3g. mkdir /x; mount /dev/sdaX /x (Replace: /X/ = partition, x = folder-name).\nmount /dev/sdaX /mnt (/X/ = root-partition), do not mount /home otherwise it will backup alongside the /root backup of the partition.\ntar zcvpf /PATH/TO/BACKUP_PARTITION/root.tar.gz -C /mnt .\nWhen the backup has finished without returning errors =\u0026gt; reboot and later check the files in the new archived folder to confirm that the files had indeed finished the backup process without trouble.\nReboot to LiveUSB or just ignore this and finish the rest of this guide.\nAfter Backup Boot into your LiveUSB.\nConfirm that you are either using GPT or MBR through gdisk /dev/sda.\nType p -\u0026gt; hit enter and you should be greeted with the current partition scheme.\nType d to remove partition and then X (replace /X/ with the number for your /home partition)\nRepeat step 3, but replace X with the number for the root partition. a. If the process was successful, there should be no file loss from your root partition due to the creation of a merged partition rather than the deletion of the partition, which would transfer the files to the new partition instead of removing them.\nDuring the writing of this guide, I had used two EXT4 partitions for both partitions, therefore you should note that the method is different for other partition types. (Hexcode number: 8300)\nType ~nto create a new partition and later choose the number for your partition with the block size set from thestart sectorto theend sector. a. Double check your start sectorand yourend sector`.\nType p to check the partition scheme and ensure that the new partition = /home + /root size and make sure to check the Hexcode number for the partition is the same as it previously was. (Hexcode number = 8300).\nIf you are satisfied with the new partition, type w to write the new partition.\nExpand the filesystem using resize2fs: a. resize2fs /dev/sdaX, where X = number of the new created partition. b. If it returns e2fck -f /dev/sdaX``, then execute that command + the resize2fs` command afterwards.\nMount the newly expanded partition to /mnt: a. mount /dev/sdaX /mnt b. Do: ls /mnt to check if your old /root files are still present.\nmkdir /x; mount /dev/sdaX /x and locate your saved /home.tar.gz file using cd.\ntar -zxpvf /PATH/TO/home.tar.gz -C /mnt/home to unpack your files to /home directory.\nRemove old /home partition from fstab from another window, CTRL+ALT+F3, through nano /mnt/etc/fstab + remove old lines for /home.\nLastly To ensure that the process is working as expected do ls -l /mnt/home/. a. It should not be 0 because the old files in /home have transferred to the new /root partition!\nReturn to the window where you ran the tar command through CTRL+ALT+F3, when the process has finished run sync.\nCheck your files through ls and if you are satisfied\u0026hellip;. reboot.\nGood Job! Now you have one unified partition rather than two :P\n","date":"2021-03-16T21:21:12Z","permalink":"https://icy-thought.github.io/p/unify-partitions/","title":"Merge 2 Partitions Into 1"}]